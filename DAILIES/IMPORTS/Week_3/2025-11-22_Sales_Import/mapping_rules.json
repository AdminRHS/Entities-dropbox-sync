{
  "company": {
    "id": {
      "source": "generated",
      "format": "BUS-YYYY-###",
      "transformation": "generate_company_id()"
    },
    "name": {
      "source": "company_name",
      "transformation": "normalize_company_name(company_name)"
    },
    "website": {
      "source": "website",
      "transformation": "clean_url(website)"
    },
    "size_id": {
      "source": "lead_company_size.id",
      "transformation": "direct_map"
    },
    "size_label": {
      "source": "lead_company_size.title",
      "transformation": "direct_map"
    },
    "year_established": {
      "source": "not_available",
      "transformation": "null"
    },
    "note": {
      "source": "multiple",
      "fields": [
        "notes",
        "description"
      ],
      "transformation": "combine_notes()"
    },
    "locations": {
      "source": "lead_company_city",
      "transformation": "extract_locations(lead_company_city)"
    },
    "industries": {
      "source": "multiple",
      "fields": [
        "lead_company_industry",
        "sub_industries"
      ],
      "transformation": "extract_industries(lead_company_industry, sub_industries)"
    }
  },
  "pocs": {
    "id": {
      "source": "generated",
      "format": "POC-###",
      "transformation": "generate_poc_id()"
    },
    "name": {
      "source": "pocs[].name",
      "transformation": "normalize_name(name)"
    },
    "position_id": {
      "source": "pocs[].position.id",
      "transformation": "direct_map"
    },
    "position_title": {
      "source": "pocs[].position.title",
      "transformation": "direct_map"
    },
    "email": {
      "source": "pocs[].email",
      "transformation": "normalize_email(email)"
    },
    "phone": {
      "source": "pocs[].phone",
      "transformation": "normalize_phone(phone)"
    },
    "linkedin_url": {
      "source": "pocs[].linkedin_url",
      "transformation": "clean_url(linkedin_url)"
    },
    "is_primary": {
      "source": "pocs[].is_primary",
      "transformation": "boolean_conversion(is_primary)"
    },
    "notes": {
      "source": "pocs[].notes",
      "transformation": "direct_map"
    }
  },
  "business_relationship": {
    "entity_type": {
      "source": "derived",
      "transformation": "classify_entity_type(record)"
    },
    "status_id": {
      "source": "lead_status.id",
      "transformation": "direct_map"
    },
    "status_type": {
      "source": "lead_status.type",
      "transformation": "direct_map"
    },
    "source_id": {
      "source": "lead_source.id",
      "transformation": "direct_map"
    },
    "source_name": {
      "source": "lead_source.name",
      "transformation": "direct_map"
    },
    "priority": {
      "source": "lead_status.priority",
      "transformation": "integer_conversion(priority)"
    }
  },
  "communication_history": {
    "total_interactions": {
      "source": "calculated",
      "transformation": "count_interactions()"
    },
    "last_contact_date": {
      "source": "communications[].created_at",
      "transformation": "max_date(communications)"
    },
    "interactions": {
      "source": "communications[]",
      "transformation": "extract_communications(communications)"
    }
  },
  "assigned_users": {
    "sales_manager_id": {
      "source": "sales_manager",
      "transformation": "integer_conversion(sales_manager)"
    },
    "sales_manager_name": {
      "source": "sales_manager_assistant.name",
      "transformation": "direct_map"
    },
    "lead_agent_id": {
      "source": "lead_agent.id",
      "transformation": "direct_map"
    },
    "created_by_id": {
      "source": "created_by.id",
      "transformation": "direct_map"
    },
    "created_by_name": {
      "source": "created_by.name",
      "transformation": "direct_map"
    }
  },
  "references": {
    "crm_link": {
      "source": "calculated",
      "transformation": "generate_crm_link(client_id)"
    },
    "crm_id": {
      "source": "client_id",
      "transformation": "direct_map"
    },
    "dropbox_path": {
      "source": "generated",
      "transformation": "generate_dropbox_path(company_name, entity_type)"
    }
  },
  "metadata": {
    "schema_version": {
      "source": "constant",
      "value": "1.0.0"
    },
    "tags": {
      "source": "derived",
      "transformation": "derive_tags(record)"
    },
    "created_at": {
      "source": "generated",
      "transformation": "current_timestamp()"
    },
    "updated_at": {
      "source": "generated",
      "transformation": "current_timestamp()"
    },
    "source_file": {
      "source": "tracking",
      "transformation": "record_source_file()"
    },
    "import_batch": {
      "source": "constant",
      "value": "2025-11-22_Sales_Import"
    },
    "data_quality_score": {
      "source": "calculated",
      "transformation": "calculate_quality_score(record)"
    }
  }
}