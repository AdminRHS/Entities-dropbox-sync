# –î–µ—Ç–∞–ª—å–Ω–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ —Å–∫—Ä–∏–ø—Ç–∞ `strapi-single-types-update.js`

## üéØ –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç–∞

–°–∫—Ä–∏–ø—Ç –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è **–æ–Ω–æ–≤–ª–µ–Ω–Ω—è single types –≤ Strapi CMS** –∑ –ª–æ–∫–∞–ª—å–Ω–∏—Ö JSON —Ñ–∞–π–ª—ñ–≤. –í—ñ–Ω —á–∏—Ç–∞—î –∑–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏ –∑ –ø–∞–ø–∫–∏ `updated/pages/` —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î —ó—Ö —á–µ—Ä–µ–∑ Strapi REST API –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–Ω—Ç—É.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
scripts/pages-update/
‚îú‚îÄ‚îÄ strapi-single-types-update.js  # –û—Å–Ω–æ–≤–Ω–∏–π —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ strapi-api-retry.js            # –ú–æ–¥—É–ª—å –∑ –ª–æ–≥—ñ–∫–æ—é —Å–ø—Ä–æ–± –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
‚îî‚îÄ‚îÄ logs/                          # –õ–æ–≥ —Ñ–∞–π–ª–∏
```

---

## üîÑ –ó–∞–≥–∞–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

### 1. **–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è** (—Ä—è–¥–∫–∏ 357-399)

```javascript
// –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
const args = process.argv.slice(2);
const isDryRun = args.includes('--dry-run');
const needsConfirm = args.includes('--confirm');
const createBackupFlag = args.includes('--backup');
const exportAfter = args.includes('--export-after');
const forceFlag = args.includes('--force');
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
- –ß–∏—Ç–∞—é—Ç—å—Å—è –∞—Ä–≥—É–º–µ–Ω—Ç–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
- –í–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è —Ä–µ–∂–∏–º —Ä–æ–±–æ—Ç–∏ (dry-run, confirm, backup, export-after)
- –û—Ç—Ä–∏–º—É—î—Ç—å—Å—è API —Ç–æ–∫–µ–Ω –∑ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ –∞–±–æ –∑–º—ñ–Ω–Ω–æ—ó –æ—Ç–æ—á–µ–Ω–Ω—è `STRAPI_TOKEN`
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞ (–∫—Ä—ñ–º dry-run —Ä–µ–∂–∏–º—É)

**–†–µ–∂–∏–º–∏ —Ä–æ–±–æ—Ç–∏:**
- `--dry-run` - —Ç—ñ–ª—å–∫–∏ —Å–∏–º—É–ª—è—Ü—ñ—è, –±–µ–∑ —Ä–µ–∞–ª—å–Ω–∏—Ö –∑–º—ñ–Ω
- `--confirm` - –æ–±–æ–≤'—è–∑–∫–æ–≤–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –¥–ª—è —Ä–µ–∞–ª—å–Ω–∏—Ö –∑–º—ñ–Ω
- `--backup` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è backup –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º
- `--export-after` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –µ–∫—Å–ø–æ—Ä—Ç –ø—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
- `--force` - –ø—Ä–∏–º—É—Å–æ–≤–µ –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ backup –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ

---

### 2. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω–∞** (—Ä—è–¥–∫–∏ 71-126)

```javascript
async function validateToken(token) {
  // GET –∑–∞–ø–∏—Ç –¥–æ /api/about-us –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞
  const response = await axios.get(`${STRAPI_URL}/api/about-us`, {
    headers: { 'Authorization': `Bearer ${token}` },
    params: { 'locale': 'en' }
  });
  
  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—É
  if (response.status === 401) return false; // –¢–æ–∫–µ–Ω –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π
  if (response.status === 403) return true;  // –¢–æ–∫–µ–Ω –≤–∞–ª—ñ–¥–Ω–∏–π, –∞–ª–µ –Ω–µ–º–∞—î –ø—Ä–∞–≤
  return true; // –¢–æ–∫–µ–Ω –≤–∞–ª—ñ–¥–Ω–∏–π
}
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
- –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è —Ç–µ—Å—Ç–æ–≤–∏–π GET –∑–∞–ø–∏—Ç –¥–æ Strapi API
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è —Å—Ç–∞—Ç—É—Å-–∫–æ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ:
  - `401` - —Ç–æ–∫–µ–Ω –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π ‚Üí —Å–∫—Ä–∏–ø—Ç –∑—É–ø–∏–Ω—è—î—Ç—å—Å—è
  - `403` - —Ç–æ–∫–µ–Ω –≤–∞–ª—ñ–¥–Ω–∏–π, –∞–ª–µ –Ω–µ–º–∞—î –ø—Ä–∞–≤ ‚Üí –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è, –ø—Ä–æ–¥–æ–≤–∂—É—î–º–æ
  - `200/404` - —Ç–æ–∫–µ–Ω –≤–∞–ª—ñ–¥–Ω–∏–π ‚Üí –ø—Ä–æ–¥–æ–≤–∂—É—î–º–æ

**–ß–æ–º—É –Ω–µ `/api/users/me`?**
- API —Ç–æ–∫–µ–Ω–∏ –≤ Strapi –Ω–µ –º–∞—é—Ç—å –¥–æ—Å—Ç—É–ø—É –¥–æ `/api/users/me`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π —Å–ø–æ—Å—ñ–± - GET –∑–∞–ø–∏—Ç –¥–æ single type endpoint

---

### 3. **–°–∫–∞–Ω—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è** (—Ä—è–¥–∫–∏ 134-172)

```javascript
function scanUpdatedFiles() {
  // –®—É–∫–∞—î —Ñ–∞–π–ª–∏ –≤ updated/pages/About/{locale}.json
  const entityDir = path.join(UPDATED_DIR, 'About');
  
  LOCALES.forEach(locale => {
    const filePath = path.join(entityDir, `${locale}.json`);
    if (fs.existsSync(filePath)) {
      filesToUpdate.push({
        entity: 'About',
        endpoint: 'about-us',
        locale: locale,
        filePath: filePath
      });
    }
  });
}
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
- –°–∫–∞–Ω—É—î—Ç—å—Å—è –ø–∞–ø–∫–∞ `updated/pages/About/`
- –ü–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å—Å—è —Ñ–∞–π–ª–∏ –¥–ª—è –∫–æ–∂–Ω–æ—ó –ª–æ–∫–∞–ª—ñ: `en.json`, `uk.json`, `pl.json`, `ru.json`
- –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –º–∞—Å–∏–≤ —Ñ–∞–π–ª—ñ–≤ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

**–ü–æ—Ç–æ—á–Ω–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è:**
- –û–±—Ä–æ–±–ª—è—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ **About entity** (—Ä—è–¥–æ–∫ 143)
- –Ü–Ω—à—ñ single types (Contact, Footer, Header, —Ç–æ—â–æ) —ñ–≥–Ω–æ—Ä—É—é—Ç—å—Å—è

---

### 4. **–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —Ç–∞ backup** (—Ä—è–¥–∫–∏ 416-443)

```javascript
// –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –¥–ª—è —Ä–µ–∞–ª—å–Ω–∏—Ö –∑–º—ñ–Ω
if (!isDryRun && needsConfirm) {
  logAction('‚ö†Ô∏è  –£–í–ê–ì–ê: –ë—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–æ —Ä–µ–∞–ª—å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤ Strapi!', 'warning');
  await new Promise(resolve => setTimeout(resolve, 5000)); // 5 —Å–µ–∫—É–Ω–¥ –∑–∞—Ç—Ä–∏–º–∫–∏
}

// –°—Ç–≤–æ—Ä–µ–Ω–Ω—è backup
if (createBackupFlag && !isDryRun && token) {
  logAction('‚ö†Ô∏è  –£–í–ê–ì–ê: Backup –µ–∫—Å–ø–æ—Ä—Ç—É—î –¥–∞–Ω—ñ –∑ Strapi —ñ –º–æ–∂–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç–∏ –≤–∞—à—ñ –ª–æ–∫–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–∏!', 'warning');
  const backupSuccess = await createBackup(token);
  if (!backupSuccess && !forceFlag) {
    process.exit(1); // –ó—É–ø–∏–Ω—è—î–º–æ —è–∫—â–æ backup –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ
  }
}
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
- –Ø–∫—â–æ `--confirm`, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î 5 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è (Ctrl+C)
- –Ø–∫—â–æ `--backup`, –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç –µ–∫—Å–ø–æ—Ä—Ç—É –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è backup
- ‚ö†Ô∏è **–í–ê–ñ–õ–ò–í–û**: Backup –µ–∫—Å–ø–æ—Ä—Ç—É—î –¥–∞–Ω—ñ –∑ Strapi —ñ **–ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—î –ª–æ–∫–∞–ª—å–Ω—ñ —Ñ–∞–π–ª–∏**!

---

### 5. **–û–±—Ä–æ–±–∫–∞ –∫–æ–∂–Ω–æ–≥–æ —Ñ–∞–π–ª—É** (—Ä—è–¥–∫–∏ 453-534)

–î–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–Ω–∞–π–¥–µ–Ω–æ–≥–æ —Ñ–∞–π–ª—É –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è:

#### 5.1. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∞—Å—É –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó** (—Ä—è–¥–∫–∏ 459-471)

```javascript
const stats = fs.statSync(file.filePath);
const diffMinutes = (now - fileTime) / (1000 * 60);

if (diffMinutes < 1) {
  logAction('‚ö†Ô∏è  –£–í–ê–ì–ê: –§–∞–π–ª –±—É–≤ –∑–º—ñ–Ω–µ–Ω–∏–π –º–µ–Ω—à–µ –Ω—ñ–∂ 1 —Ö–≤–∏–ª–∏–Ω—É —Ç–æ–º—É!', 'warning');
}
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è —á–∞—Å –æ—Å—Ç–∞–Ω–Ω—å–æ—ó –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ñ–∞–π–ª—É
- –Ø–∫—â–æ —Ñ–∞–π–ª –∑–º—ñ–Ω–µ–Ω–∏–π –º–µ–Ω—à–µ 1 —Ö–≤–∏–ª–∏–Ω–∏ —Ç–æ–º—É - –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è
- –¶–µ –¥–æ–ø–æ–º–∞–≥–∞—î –≤–∏—è–≤–∏—Ç–∏ –Ω–µ–∑–±–µ—Ä–µ–∂–µ–Ω—ñ –∑–º—ñ–Ω–∏

---

#### 5.2. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è JSON —Ñ–∞–π–ª—É** (—Ä—è–¥–∫–∏ 201-248)

```javascript
function validateFile(filePath) {
  const content = fs.readFileSync(filePath, 'utf8');
  const data = JSON.parse(content);
  
  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —â–æ —Ü–µ –æ–±'—î–∫—Ç
  if (typeof data !== 'object' || Array.isArray(data)) {
    return { valid: false, error: '–§–∞–π–ª –º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ JSON –æ–±\'—î–∫—Ç' };
  }
  
  // –û—á–∏—â–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–Ω–∏—Ö –ø–æ–ª—ñ–≤
  const cleanedData = cleanDataForUpdate(data);
  
  return { valid: true, data: cleanedData };
}
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
- –ß–∏—Ç–∞—î—Ç—å—Å—è JSON —Ñ–∞–π–ª
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –≤–∞–ª—ñ–¥–Ω—ñ—Å—Ç—å JSON
- –í–∏–¥–∞–ª—è—é—Ç—å—Å—è —Å–∏—Å—Ç–µ–º–Ω—ñ –ø–æ–ª—è Strapi:
  - `createdAt`, `updatedAt` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è
  - `locale` - –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ query –ø–∞—Ä–∞–º–µ—Ç—Ä
  - `id` - –Ω–µ –º–æ–∂–Ω–∞ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏
  - `localizations` - relation –ø–æ–ª–µ, —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

---

#### 5.3. **–û–Ω–æ–≤–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ API** (—Ä—è–¥–∫–∏ 282-329)

```javascript
async function updateSingleType(endpoint, locale, data, token, dryRun) {
  // –û—Ç—Ä–∏–º—É—î–º–æ –ø–æ—Ç–æ—á–Ω—ñ –¥–∞–Ω—ñ –∑ Strapi
  const getResponse = await axios.get(`${STRAPI_URL}/api/${endpoint}`, {
    params: {
      'locale': locale,
      'publicationState': 'preview' // –û—Ç—Ä–∏–º—É—î–º–æ —ñ draft —ñ published
    }
  });
  
  // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –º–æ–¥—É–ª—å –∑ –ª–æ–≥—ñ–∫–æ—é —Å–ø—Ä–æ–±
  return await updateSingleTypeWithRetry(
    endpoint, locale, data, token, STRAPI_URL, currentData, logAction, 12
  );
}
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
- –°–ø–æ—á–∞—Ç–∫—É –æ—Ç—Ä–∏–º—É—é—Ç—å—Å—è –ø–æ—Ç–æ—á–Ω—ñ –¥–∞–Ω—ñ –∑ Strapi (–¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è `publishedAt` —Ç–∞ `id`)
- –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è —Ñ—É–Ω–∫—Ü—ñ—è `updateSingleTypeWithRetry` –∑ –º–æ–¥—É–ª—è `strapi-api-retry.js`
- –ü–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –º–∞–∫—Å–∏–º—É–º 12 —Å–ø—Ä–æ–± –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

---

## üîß –î–µ—Ç–∞–ª—å–Ω–∞ —Ä–æ–±–æ—Ç–∞ –º–æ–¥—É–ª—è `strapi-api-retry.js`

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–ø—Ä–æ–±

–ú–æ–¥—É–ª—å –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –æ–Ω–æ–≤–∏—Ç–∏ –¥–∞–Ω—ñ —á–µ—Ä–µ–∑ **–º–Ω–æ–∂–∏–Ω–Ω—ñ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó** –º–µ—Ç–æ–¥—ñ–≤, URL —Ç–∞ —Ñ–æ—Ä–º–∞—Ç—ñ–≤ body:

#### 1. **–§–æ—Ä–º–∞—Ç–∏ URL** (—Ä—è–¥–∫–∏ 43-46)

```javascript
const urlFormats = [
  `${strapiUrl}/api/${endpoint}`,                    // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π
  `${strapiUrl}/api/single-types/${endpoint}`       // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π
];
```

**–°–ø—Ä–æ–±—É—î:**
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π API endpoint: `/api/about-us`
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –¥–ª—è single types: `/api/single-types/about-us`

---

#### 2. **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∑–∞–ø–∏—Ç—ñ–≤** (—Ä—è–¥–∫–∏ 62-69)

```javascript
const requestConfigs = [
  baseRequestConfig,  // –ë–∞–∑–æ–≤–∏–π –∑ populate
  { ...baseRequestConfig, params: { ...baseRequestConfig.params, 'publicationState': 'live' } },
  { ...baseRequestConfig, params: { ...baseRequestConfig.params, 'populate': 'deep' } },
  // ... —ñ–Ω—à—ñ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó
];
```

**–†—ñ–∑–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤:**
- –ë–∞–∑–æ–≤–∏–π –∑ `populate: '*'`
- –ó `publicationState: 'live'`
- –ó `populate: 'deep'` (–≥–ª–∏–±–æ–∫–∏–π populate)
- –ö–æ–º–±—ñ–Ω–∞—Ü—ñ—ó –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –¥–ª—è i18n –ø–ª–∞–≥—ñ–Ω–∞

---

#### 3. **–§–æ—Ä–º–∞—Ç–∏ body** (—Ä—è–¥–∫–∏ 96-141)

```javascript
// –§–æ—Ä–º–∞—Ç 1: –ë–ï–ó attributes (–ø—Ä–∞—Ü—é—î –¥–ª—è title!)
bodyFormats.push({ data: dataToSend });

// –§–æ—Ä–º–∞—Ç 2: –ó attributes (–æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π –¥–ª—è Strapi v4)
bodyFormats.push({ data: { attributes: dataToSend } });

// –§–æ—Ä–º–∞—Ç 3: –ó attributes + publishedAt (–¥–ª—è –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó)
if (currentData?.data?.publishedAt) {
  bodyFormats.push({ data: { attributes: { ...dataToSend, publishedAt: ... } } });
}

// –§–æ—Ä–º–∞—Ç 4: –ó attributes + –Ω–æ–≤–∏–π publishedAt
if (!dataToSend.publishedAt) {
  bodyFormats.push({ data: { attributes: { ...dataToSend, publishedAt: new Date() } } });
}

// –§–æ—Ä–º–∞—Ç 5: –ó attributes + id
if (currentData?.data?.id) {
  bodyFormats.push({ data: { id: currentData.data.id, attributes: dataToSend } });
}
```

**–ß–æ–º—É —Ä—ñ–∑–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏?**
- Strapi v4 –≤–∏–º–∞–≥–∞—î —Ñ–æ—Ä–º–∞—Ç `{ data: { attributes: {...} } }`
- –ê–ª–µ –¥–ª—è –ø–æ–ª—è `title` –∫—Ä–∞—â–µ –ø—Ä–∞—Ü—é—î —Ñ–æ—Ä–º–∞—Ç –±–µ–∑ `attributes`
- –¢–æ–º—É —Å–ø—Ä–æ–±—É—î–º–æ –æ–±–∏–¥–≤–∞ –≤–∞—Ä—ñ–∞–Ω—Ç–∏

---

#### 4. **HTTP –º–µ—Ç–æ–¥–∏** (—Ä—è–¥–∫–∏ 145-149)

```javascript
const methods = [
  { method: 'PUT', name: 'PUT' },    // –ù–∞–π–±—ñ–ª—å—à –π–º–æ–≤—ñ—Ä–Ω–∏–π
  { method: 'POST', name: 'POST' },  // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞
  { method: 'PATCH', name: 'PATCH' } // –î–ª—è —á–∞—Å—Ç–∫–æ–≤–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
];
```

**–ü–æ—Ä—è–¥–æ–∫ —Å–ø—Ä–æ–±:**
1. PUT (–Ω–∞–π–±—ñ–ª—å—à –π–º–æ–≤—ñ—Ä–Ω–∏–π –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è)
2. POST (–º–æ–∂–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –¥–ª—è single types)
3. PATCH (–¥–ª—è —á–∞—Å—Ç–∫–æ–≤–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è)

---

### 5. **Nested loops - —Å–ø—Ä–æ–±–∏ –≤—Å—ñ—Ö –∫–æ–º–±—ñ–Ω–∞—Ü—ñ–π** (—Ä—è–¥–∫–∏ 155-477)

```javascript
for (let urlIndex = 0; urlIndex < urlFormats.length; urlIndex++) {
  for (let configIndex = 0; configIndex < requestConfigs.length; configIndex++) {
    for (let bodyIndex = 0; bodyIndex < bodyFormats.length; bodyIndex++) {
      for (let methodIndex = 0; methodIndex < methods.length; methodIndex++) {
        // –°–ø—Ä–æ–±–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
        attemptNumber++;
        try {
          const response = await axios[method](url, body, config);
          // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —É—Å–ø—ñ—Ö—É...
        } catch (error) {
          // –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–∫–∏...
        }
      }
    }
  }
}
```

**–°–∫—ñ–ª—å–∫–∏ —Å–ø—Ä–æ–±?**
- 2 URL √ó 5 config √ó 5 body √ó 3 methods = **150 –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏—Ö —Å–ø—Ä–æ–±**
- –ê–ª–µ —î –æ–±–º–µ–∂–µ–Ω–Ω—è `maxAttempts = 12`, —Ç–æ–º—É –º–∞–∫—Å–∏–º—É–º 12 —Å–ø—Ä–æ–±

**–õ–æ–≥—ñ–∫–∞:**
- –Ø–∫—â–æ —Å–ø—Ä–æ–±–∞ —É—Å–ø—ñ—à–Ω–∞ (—Å—Ç–∞—Ç—É—Å 200) ‚Üí –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ —É—Å–ø—ñ—Ö
- –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞ 400/405/500 ‚Üí –ø—Ä–æ–±—É—î–º–æ –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—é
- –Ø–∫—â–æ —ñ–Ω—à–∞ –ø–æ–º–∏–ª–∫–∞ (401, 403) ‚Üí –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø–æ–º–∏–ª–∫—É –æ–¥—Ä–∞–∑—É

---

### 6. **–°–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–ª—è `title`** (—Ä—è–¥–∫–∏ 191-243)

```javascript
// –Ø–∫—â–æ title –Ω–µ –∑–±–µ—Ä—ñ–≥—Å—è –ø—ñ—Å–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
if (response.data.data.attributes.title !== dataToSend.title) {
  logAction('‚ö†Ô∏è  title –Ω–µ –∑–±–µ—Ä—ñ–≥—Å—è, —Å–ø—Ä–æ–±–∞ –æ–∫—Ä–µ–º–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è...', 'warning');
  
  // –°–ø—Ä–æ–±—É—î–º–æ —Ä—ñ–∑–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏ –¥–ª—è title
  const titleFormats = [
    { data: { attributes: { title: dataToSend.title } } },
    { data: { title: dataToSend.title } },  // –¶–µ–π —Ñ–æ—Ä–º–∞—Ç –ø—Ä–∞—Ü—é—î!
    { title: dataToSend.title }
  ];
  
  // –Ø–∫—â–æ title –æ–Ω–æ–≤–ª–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ
  if (titleUpdated) {
    // –û–Ω–æ–≤–ª—é—î–º–æ –≤—Å—ñ —ñ–Ω—à—ñ –ø–æ–ª—è –æ–∫—Ä–µ–º–æ
    const otherFields = { ...dataToSend };
    delete otherFields.title;
    await axios.put(url, { data: { attributes: otherFields } }, requestConfig);
  }
}
```

**–ß–æ–º—É –æ–∫—Ä–µ–º–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è title?**
- Strapi hooks –º–æ–∂—É—Ç—å –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ `title` –ø—ñ—Å–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
- –§–æ—Ä–º–∞—Ç `{ data: { title: ... } }` (–±–µ–∑ `attributes`) –ø—Ä–∞—Ü—é—î –∫—Ä–∞—â–µ –¥–ª—è title
- –¢–æ–º—É —Å–ø–æ—á–∞—Ç–∫—É –æ–Ω–æ–≤–ª—é—î–º–æ title, –ø–æ—Ç—ñ–º —ñ–Ω—à—ñ –ø–æ–ª—è

---

### 7. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö** (—Ä—è–¥–∫–∏ 245-340)

```javascript
// –ó–∞—Ç—Ä–∏–º–∫–∞ 500ms –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
await new Promise(resolve => setTimeout(resolve, 500));

// GET –∑–∞–ø–∏—Ç –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
const verifyResponse = await axios.get(url, {
  params: {
    'locale': locale,
    'publicationState': 'live' // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ published –¥–∞–Ω—ñ
  }
});

// –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–∏—Ö —Ç–∞ –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö
sentFields.forEach(field => {
  if (String(sentValue) !== String(verifiedValue)) {
    mismatchedFields.push(field);
    logAction(`‚ö†Ô∏è  ${field}: –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–µ –∑–±—ñ–≥–∞—é—Ç—å—Å—è`, 'warning');
  }
});
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
- –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–æ–±–∏—Ç—å—Å—è GET –∑–∞–ø–∏—Ç –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
- –ü–æ—Ä—ñ–≤–Ω—é—é—Ç—å—Å—è –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω—ñ —Ç–∞ –æ—Ç—Ä–∏–º–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è
- –Ø–∫—â–æ —î –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ - –ª–æ–≥—É—î—Ç—å—Å—è –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è

---

### 8. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—è** (—Ä—è–¥–∫–∏ 356-379)

```javascript
// –Ø–∫—â–æ –¥–∞–Ω—ñ –Ω–µ –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω—ñ
if (!isPublished) {
  logAction('‚ö†Ô∏è  –î–∞–Ω—ñ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –≤ draft —Å—Ç–∞–Ω—ñ. –°–ø—Ä–æ–±–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó...', 'warning');
  
  // PUT –∑–∞–ø–∏—Ç –∑ publishedAt –¥–ª—è –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó
  const publishBody = {
    data: {
      attributes: {
        ...sentData,
        publishedAt: new Date().toISOString()
      }
    }
  };
  await axios.put(url, publishBody, requestConfig);
  logAction('‚úÖ –î–∞–Ω—ñ –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ', 'success');
}
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
- –Ø–∫—â–æ –¥–∞–Ω—ñ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –≤ draft —Å—Ç–∞–Ω—ñ (–±–µ–∑ `publishedAt`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø—É–±–ª—ñ–∫–∞—Ü—ñ—è —á–µ—Ä–µ–∑ –¥–æ–¥–∞–≤–∞–Ω–Ω—è `publishedAt`
- –î–∞–Ω—ñ —Å—Ç–∞—é—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∏–º–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ

---

## üìä –õ–æ–≥—É–≤–∞–Ω–Ω—è

### –§–∞–π–ª–æ–≤—ñ –ª–æ–≥–∏ (—Ä—è–¥–∫–∏ 44-62)

```javascript
function logAction(message, level = 'info') {
  const timestamp = new Date().toISOString();
  const logMessage = `[${timestamp}] ${message}\n`;
  
  // –ó–∞–ø–∏—Å —É —Ñ–∞–π–ª
  fs.appendFileSync(logFile, logMessage, 'utf8');
  
  // –í–∏–≤—ñ–¥ —É –∫–æ–Ω—Å–æ–ª—å –∑ –∫–æ–ª—å–æ—Ä–∞–º–∏
  console.log(`${color}${message}${colors.reset}`);
}
```

**–©–æ –ª–æ–≥—É—î—Ç—å—Å—è:**
- –í—Å—ñ –¥—ñ—ó –∑ timestamp
- –£—Å–ø—ñ—à–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (–∑–µ–ª–µ–Ω–∏–π)
- –ü–æ–º–∏–ª–∫–∏ (—á–µ—Ä–≤–æ–Ω–∏–π)
- –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è (–∂–æ–≤—Ç–∏–π)
- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è (–±–ª–∞–∫–∏—Ç–Ω–∏–π)

**–§–∞–π–ª –ª–æ–≥—ñ–≤:**
- `logs/update-{timestamp}.log`
- –ú—ñ—Å—Ç–∏—Ç—å –ø–æ–≤–Ω—É —ñ—Å—Ç–æ—Ä—ñ—é –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

---

## üîí –ú–µ—Ö–∞–Ω—ñ–∑–º–∏ –±–µ–∑–ø–µ–∫–∏

### 1. **Dry-run –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º**
- –ë–µ–∑ `--confirm` —Å–∫—Ä–∏–ø—Ç –ø—Ä–∞—Ü—é—î –≤ dry-run —Ä–µ–∂–∏–º—ñ
- –ù—ñ—è–∫—ñ –∑–º—ñ–Ω–∏ –Ω–µ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è

### 2. **–û–±–æ–≤'—è–∑–∫–æ–≤–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è**
- `--confirm` + 5 —Å–µ–∫—É–Ω–¥ –∑–∞—Ç—Ä–∏–º–∫–∏ –¥–ª—è —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ Ctrl+C

### 3. **Backup –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º**
- `--backup` —Å—Ç–≤–æ—Ä—é—î backup —á–µ—Ä–µ–∑ –µ–∫—Å–ø–æ—Ä—Ç
- ‚ö†Ô∏è **–£–í–ê–ì–ê**: Backup –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—î –ª–æ–∫–∞–ª—å–Ω—ñ —Ñ–∞–π–ª–∏!

### 4. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö**
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ JSON –≤–∞–ª—ñ–¥–Ω–æ—Å—Ç—ñ
- –û—á–∏—â–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–Ω–∏—Ö –ø–æ–ª—ñ–≤
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö –ø—ñ—Å–ª—è –æ—á–∏—â–µ–Ω–Ω—è

### 5. **Rate limiting**
- –ó–∞—Ç—Ä–∏–º–∫–∞ 500ms –º—ñ–∂ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º–∏ —Ñ–∞–π–ª—ñ–≤
- –ó–∞—Ç—Ä–∏–º–∫–∞ 500ms –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è

---

## üéØ –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

```bash
# 1. Dry-run (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–∏—Ö –∑–º—ñ–Ω)
node strapi-single-types-update.js --dry-run

# 2. –†–µ–∞–ª—å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
node strapi-single-types-update.js --confirm YOUR_TOKEN

# 3. –ó backup —Ç–∞ –µ–∫—Å–ø–æ—Ä—Ç–æ–º
node strapi-single-types-update.js --confirm --backup --export-after YOUR_TOKEN

# 4. –ü—Ä–∏–º—É—Å–æ–≤–µ –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –±–µ–∑ backup
node strapi-single-types-update.js --confirm --backup --force YOUR_TOKEN
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ø—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ:**

1. **–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è** ‚Üí –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ ‚Üí –°–∫–∞–Ω—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
2. **–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è** ‚Üí 5 —Å–µ–∫—É–Ω–¥ –∑–∞—Ç—Ä–∏–º–∫–∏ (—è–∫—â–æ `--confirm`)
3. **Backup** ‚Üí –ï–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö –∑ Strapi (—è–∫—â–æ `--backup`)
4. **–î–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ñ–∞–π–ª—É:**
   - –í–∞–ª—ñ–¥–∞—Ü—ñ—è JSON
   - –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–∏—Ö –¥–∞–Ω–∏—Ö –∑ Strapi
   - –°–ø—Ä–æ–±–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (–¥–æ 12 —Å–ø—Ä–æ–± –∑ —Ä—ñ–∑–Ω–∏–º–∏ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—è–º–∏)
   - –°–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ `title` (—è–∫—â–æ –Ω–µ –∑–±–µ—Ä—ñ–≥—Å—è)
   - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—è (—è–∫—â–æ draft)
5. **–ü—ñ–¥—Å—É–º–æ–∫** ‚Üí –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø—ñ—à–Ω–∏—Ö/–Ω–µ—É—Å–ø—ñ—à–Ω–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω—å
6. **–ï–∫—Å–ø–æ—Ä—Ç** ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –µ–∫—Å–ø–æ—Ä—Ç –ø—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (—è–∫—â–æ `--export-after`)

---

## ‚öôÔ∏è –ö–ª—é—á–æ–≤—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

### 1. **–ú–Ω–æ–∂–∏–Ω–Ω—ñ —Å–ø—Ä–æ–±–∏ –∑ —Ä—ñ–∑–Ω–∏–º–∏ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—è–º–∏**
- –ù–∞–º–∞–≥–∞—î—Ç—å—Å—è –∑–Ω–∞–π—Ç–∏ –ø—Ä–∞—Ü—é—é—á—É –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—é URL + config + body + method
- –ú–∞–∫—Å–∏–º—É–º 12 —Å–ø—Ä–æ–± –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ñ–∞–π–ª—É

### 2. **–°–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ title**
- –Ø–∫—â–æ `title` –Ω–µ –∑–±–µ—Ä—ñ–≥—Å—è —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç
- –°–ø—Ä–æ–±—É—î –æ–Ω–æ–≤–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ `title` –æ–∫—Ä–µ–º–∏–º –∑–∞–ø–∏—Ç–æ–º
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ–æ—Ä–º–∞—Ç –±–µ–∑ `attributes` (–ø—Ä–∞—Ü—é—î –∫—Ä–∞—â–µ)

### 3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—è**
- –Ø–∫—â–æ –¥–∞–Ω—ñ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –≤ draft —Å—Ç–∞–Ω—ñ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—É–±–ª—ñ–∫—É—î —á–µ—Ä–µ–∑ –¥–æ–¥–∞–≤–∞–Ω–Ω—è `publishedAt`

### 4. **–î–µ—Ç–∞–ª—å–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞**
- –ü–æ—Ä—ñ–≤–Ω—é—î –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω—ñ —Ç–∞ –æ—Ç—Ä–∏–º–∞–Ω—ñ –¥–∞–Ω—ñ
- –õ–æ–≥—É—î –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î —Å—Ç–∞—Ç—É—Å –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó

### 5. **–ë–µ–∑–ø–µ–∫–∞**
- Dry-run –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
- –û–±–æ–≤'—è–∑–∫–æ–≤–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å backup
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

---

## üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –Ø–∫—â–æ –¥–∞–Ω—ñ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è:

1. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏** - –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–æ–∂–Ω—É —Å–ø—Ä–æ–±—É
2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–æ—Ä–º–∞—Ç body** - Strapi v4 –≤–∏–º–∞–≥–∞—î `{ data: { attributes: {...} } }`
3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ title** - –º–æ–∂–µ –ø–æ—Ç—Ä–µ–±—É–≤–∞—Ç–∏ –æ–∫—Ä–µ–º–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
4. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É** - —Ç–æ–∫–µ–Ω –º–æ–∂–µ –Ω–µ –º–∞—Ç–∏ –ø—Ä–∞–≤ –Ω–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
5. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Strapi hooks** - –º–æ–∂—É—Ç—å –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –ø—ñ—Å–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è

### –Ø–∫—â–æ title –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è:

- –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–ø—Ä–æ–±—É—î –æ–∫—Ä–µ–º–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è title
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ–æ—Ä–º–∞—Ç `{ data: { title: ... } }` (–±–µ–∑ attributes)
- –Ø–∫—â–æ –Ω–µ —Å–ø—Ä–∞—Ü—é–≤–∞–ª–æ - –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ Strapi hooks –¥–ª—è –ø–æ–ª—è title

---

## üìù –í–∏—Å–Ω–æ–≤–æ–∫

–°–∫—Ä–∏–ø—Ç `strapi-single-types-update.js` - —Ü–µ **–Ω–∞–¥—ñ–π–Ω–∏–π —Ç–∞ –±–µ–∑–ø–µ—á–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç** –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è single types –≤ Strapi –∑ –ª–æ–∫–∞–ª—å–Ω–∏—Ö JSON —Ñ–∞–π–ª—ñ–≤. –í—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–Ω–æ–∂–∏–Ω–Ω—ñ —Å–ø—Ä–æ–±–∏ –∑ —Ä—ñ–∑–Ω–∏–º–∏ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—è–º–∏ –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è, –º–∞—î –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ –±–µ–∑–ø–µ–∫–∏ –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –≤—Ç—Ä–∞—Ç—ñ –¥–∞–Ω–∏—Ö.

