# Strapi Single Types Update Script

–°–∫—Ä–∏–ø—Ç –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è single types –≤ Strapi CMS –∑ —Ñ–∞–π–ª—ñ–≤ –∑ –ø–∞–ø–∫–∏ `updated/pages/`.

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ

**–¶–µ–π —Å–∫—Ä–∏–ø—Ç –ø—Ä–∞—Ü—é—î –∑ –ü–†–û–î–ê–ö–®–ù –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö!** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∑ –æ–±–µ—Ä–µ–∂–Ω—ñ—Å—Ç—é.

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

```bash
npm install
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏ updated/pages/

–°–∫—Ä–∏–ø—Ç —á–∏—Ç–∞—î —Ñ–∞–π–ª–∏ –∑ —Ç–∞–∫–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏:

```
updated/pages/
  About/
    en.json
    uk.json
    pl.json
    ru.json
  Contact/
    en.json
    ...
```

–§–∞–π–ª–∏ –º–∞—é—Ç—å –±—É—Ç–∏ —É —Ñ–æ—Ä–º–∞—Ç—ñ –ø–ª–∞—Å–∫–∏—Ö JSON –æ–±'—î–∫—Ç—ñ–≤ (–±–µ–∑ `data.attributes`), —Ç–∞–∫–∏–π —Å–∞–º–∏–π —è–∫ –ø—ñ—Å–ª—è –µ–∫—Å–ø–æ—Ä—Ç—É.

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### Dry-run —Ä–µ–∂–∏–º (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)

–ü–µ—Ä–µ–≥–ª—è–¥ —Ç–æ–≥–æ, —â–æ –±—É–¥–µ –æ–Ω–æ–≤–ª–µ–Ω–æ, –±–µ–∑ —Ä–µ–∞–ª—å–Ω–∏—Ö –∑–º—ñ–Ω:

```bash
node strapi-single-types-update.js --dry-run
```

### –†–µ–∞–ª—å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è–º

```bash
node strapi-single-types-update.js --confirm <token>
```

–∞–±–æ —á–µ—Ä–µ–∑ environment variable:

```bash
STRAPI_TOKEN=your_token_here node strapi-single-types-update.js --confirm
```

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ backup —Ç–∞ –µ–∫—Å–ø–æ—Ä—Ç–æ–º –ø—ñ—Å–ª—è

```bash
node strapi-single-types-update.js --confirm --backup --export-after <token>
```

## –û–ø—Ü—ñ—ó

- `--dry-run` - –¢—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≥–ª—è–¥ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–∏—Ö –∑–º—ñ–Ω (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, —è–∫—â–æ –Ω–µ –≤–∫–∞–∑–∞–Ω–æ `--confirm`)
- `--confirm` - –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –¥–ª—è —Ä–µ–∞–ª—å–Ω–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω—å (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ –¥–ª—è –∑–º—ñ–Ω –≤ Strapi)
- `--backup` - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è backup (–µ–∫—Å–ø–æ—Ä—Ç) –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º
- `--export-after` - –ó–∞–ø—É—Å–∫ –µ–∫—Å–ø–æ—Ä—Ç—É –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

## –ü—Ä–æ—Ü–µ—Å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

1. **–°–∫–∞–Ω—É–≤–∞–Ω–Ω—è** - –°–∫—Ä–∏–ø—Ç —Å–∫–∞–Ω—É—î –ø–∞–ø–∫—É `updated/pages/` —Ç–∞ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –≤—Å—ñ —Ñ–∞–π–ª–∏ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
2. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è** - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ JSON —Ç–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö
3. **–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è** - –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ `--confirm`, —á–µ–∫–∞—î 5 —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º
4. **Backup** - –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ `--backup`, —Å—Ç–≤–æ—Ä—é—î backup —á–µ—Ä–µ–∑ –µ–∫—Å–ø–æ—Ä—Ç
5. **–û–Ω–æ–≤–ª–µ–Ω–Ω—è** - –û–Ω–æ–≤–ª—é—î –∫–æ–∂–µ–Ω —Ñ–∞–π–ª —á–µ—Ä–µ–∑ Strapi API –∑ –∑–∞—Ç—Ä–∏–º–∫–æ—é 500ms –º—ñ–∂ –∑–∞–ø–∏—Ç–∞–º–∏
6. **–ï–∫—Å–ø–æ—Ä—Ç** - –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ `--export-after`, –∑–∞–ø—É—Å–∫–∞—î –µ–∫—Å–ø–æ—Ä—Ç –ø—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

## –õ–æ–≥—É–≤–∞–Ω–Ω—è

–í—Å—ñ –¥—ñ—ó –ª–æ–≥—É—é—Ç—å—Å—è —É —Ñ–∞–π–ª:

```
logs/update-{timestamp}.log
```

–§–æ—Ä–º–∞—Ç –ª–æ–≥—É:
```
[2024-11-28T14:30:15.123Z] UPDATE About/en.json ‚Üí SUCCESS
[2024-11-28T14:30:16.456Z] UPDATE Contact/uk.json ‚Üí ERROR: Invalid field
```

## API Endpoint

–°–∫—Ä–∏–ø—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î PUT –∑–∞–ø–∏—Ç–∏:

```
PUT https://strapi.rem-s.com/api/{endpoint}?locale={locale}
```

**Headers:**
```
Authorization: Bearer {token}
Content-Type: application/json
```

**Body:** JSON –æ–±'—î–∫—Ç –∑ –¥–∞–Ω–∏–º–∏ (–±–µ–∑ –æ–±–≥–æ—Ä—Ç–∫–∏ `data.attributes`)

## –ë–µ–∑–ø–µ–∫–∞

- **Dry-run –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º** - –±–µ–∑ `--confirm` —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ä–æ–±–∏—Ç—å —Ä–µ–∞–ª—å–Ω–∏—Ö –∑–º—ñ–Ω
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è** - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —Ñ–∞–π–ª—ñ–≤ –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º
- **Rate limiting** - –∑–∞—Ç—Ä–∏–º–∫–∞ 500ms –º—ñ–∂ –∑–∞–ø–∏—Ç–∞–º–∏
- **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫** - –¥–µ—Ç–∞–ª—å–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏
- **Backup** - –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–∏—Ç–∏ backup –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º

## –ü—Ä–∏–∫–ª–∞–¥–∏

### –ü—Ä–∏–∫–ª–∞–¥ 1: –ü–µ—Ä–µ–≥–ª—è–¥ –∑–º—ñ–Ω

```bash
node strapi-single-types-update.js --dry-run
```

–í–∏–≤—ñ–¥:
```
üîç –†–µ–∂–∏–º DRY-RUN - –∑–º—ñ–Ω–∏ –Ω–µ –±—É–¥—É—Ç—å –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω—ñ

üì¶ –ó–Ω–∞–π–¥–µ–Ω–æ 3 —Ñ–∞–π–ª—ñ–≤ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:
   1. About/en.json
   2. Contact/uk.json
   3. Home/pl.json

[1/3] –û–Ω–æ–≤–ª–µ–Ω–Ω—è About/en.json...
   ‚úÖ Dry-run mode - –∑–º—ñ–Ω–∏ –Ω–µ –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–æ
```

### –ü—Ä–∏–∫–ª–∞–¥ 2: –†–µ–∞–ª—å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

```bash
node strapi-single-types-update.js --confirm your_token_here
```

–í–∏–≤—ñ–¥:
```
‚ö†Ô∏è  –£–í–ê–ì–ê: –ë—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–æ —Ä–µ–∞–ª—å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤ Strapi!
   –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å Ctrl+C –¥–ª—è —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è –∞–±–æ –∑–∞—á–µ–∫–∞–π—Ç–µ 5 —Å–µ–∫—É–Ω–¥...

[1/3] –û–Ω–æ–≤–ª–µ–Ω–Ω—è About/en.json...
   ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ
```

### –ü—Ä–∏–∫–ª–∞–¥ 3: –ü–æ–≤–Ω–∏–π —Ü–∏–∫–ª –∑ backup —Ç–∞ –µ–∫—Å–ø–æ—Ä—Ç–æ–º

```bash
node strapi-single-types-update.js --confirm --backup --export-after your_token_here
```

–¶–µ –≤–∏–∫–æ–Ω–∞—î:
1. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è backup (–µ–∫—Å–ø–æ—Ä—Ç –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Å—Ç–∞–Ω—É)
2. –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –∑ `updated/pages/`
3. –ï–∫—Å–ø–æ—Ä—Ç –æ–Ω–æ–≤–ª–µ–Ω–∏—Ö –¥–∞–Ω–∏—Ö –Ω–∞–∑–∞–¥ —É `exported/pages/` (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ `--export-after`)

## –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

–°–∫—Ä–∏–ø—Ç –æ–±—Ä–æ–±–ª—è—î —Ç–∞–∫—ñ –ø–æ–º–∏–ª–∫–∏:

- **–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç JSON** - —Ñ–∞–π–ª –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ —Ä–æ–∑–ø–∞—Ä—Å–µ–Ω–∏–π
- **–ü–æ—Ä–æ–∂–Ω—ñ–π —Ñ–∞–π–ª** - —Ñ–∞–π–ª –Ω–µ –º—ñ—Å—Ç–∏—Ç—å –¥–∞–Ω–∏—Ö
- **API –ø–æ–º–∏–ª–∫–∏** - –ø–æ–º–∏–ª–∫–∏ –≤—ñ–¥ Strapi API (401, 404, 500, —Ç–æ—â–æ)
- **–ú–µ—Ä–µ–∂–µ–≤—ñ –ø–æ–º–∏–ª–∫–∏** - –ø—Ä–æ–±–ª–µ–º–∏ –∑ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è–º

–í—Å—ñ –ø–æ–º–∏–ª–∫–∏ –ª–æ–≥—É—é—Ç—å—Å—è —É —Ñ–∞–π–ª —Ç–∞ –≤–∏–≤–æ–¥—è—Ç—å—Å—è —É –∫–æ–Ω—Å–æ–ª—å.

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç –≤–∏–≤–æ–¥–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:

```
‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ!

üìä –ü—ñ–¥—Å—É–º–æ–∫:
   –£—Å–ø—ñ—à–Ω–æ –æ–Ω–æ–≤–ª–µ–Ω–æ: 8
   –ü–æ–º–∏–ª–∫–∏: 2
   Log file: logs/update-2024-11-28T14-30-15-123Z.log
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

1. **–ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `--dry-run` —Å–ø–æ—á–∞—Ç–∫—É** –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
2. **–°—Ç–≤–æ—Ä—é–π—Ç–µ backup** –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º (`--backup`)
3. **–ï–∫—Å–ø–æ—Ä—Ç—É–π—Ç–µ –ø—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è** (`--export-after`) –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
4. **–ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –ª–æ–≥–∏** –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
5. **–¢–µ—Å—Ç—É–π—Ç–µ –Ω–∞ –Ω–µ–≤–µ–ª–∏–∫—ñ–π –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ñ–∞–π–ª—ñ–≤** –ø–µ—Ä–µ–¥ –º–∞—Å–æ–≤–∏–º –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º

## Troubleshooting

### –§–∞–π–ª–∏ –Ω–µ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
- –ß–∏ —ñ—Å–Ω—É—î –ø–∞–ø–∫–∞ `updated/pages/`
- –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ (`updated/pages/{Entity}/{locale}.json`)
- –ß–∏ —Ñ–∞–π–ª–∏ –º–∞—é—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –Ω–∞–∑–≤–∏ (`en.json`, `uk.json`, —Ç–æ—â–æ)
- –ß–∏ –±—É–≤ –≤–∏–∫–æ–Ω–∞–Ω–∏–π –µ–∫—Å–ø–æ—Ä—Ç –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º (–∑–∞–ø—É—Å—Ç—ñ—Ç—å `strapi-single-types-export.js`)

### –ü–æ–º–∏–ª–∫–∏ API

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø—É
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ endpoint –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–∏—Ö —É JSON —Ñ–∞–π–ª–∞—Ö

### –ü–æ–º–∏–ª–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ —Ñ–∞–π–ª –º—ñ—Å—Ç–∏—Ç—å –≤–∞–ª—ñ–¥–Ω–∏–π JSON
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ —Ñ–∞–π–ª –Ω–µ –ø–æ—Ä–æ–∂–Ω—ñ–π
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ —Ñ–∞–π–ª –º—ñ—Å—Ç–∏—Ç—å –æ–±'—î–∫—Ç (–Ω–µ –º–∞—Å–∏–≤)

